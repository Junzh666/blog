import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as a,c as n,f as s}from"./app-v2FQJYry.js";const d={},i=s(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>Ubuntu系统在默认情况下会自动以lv（Logical Volume）作为系统盘的管理方式。如果你没有在安装系统时手动修改/目录空间大小，会默认分配 <mark>100GB</mark> 给整个根目录。当然你也可以随时扩展。</p></div><h2 id="扩展ubuntu默认lv空间" tabindex="-1"><a class="header-anchor" href="#扩展ubuntu默认lv空间" aria-hidden="true">#</a> 扩展Ubuntu默认lv空间</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看LVM空间</span>
<span class="token function">sudo</span> lvdisplay

<span class="token comment"># 将所有剩余空间分配给LVM</span>
<span class="token function">sudo</span> lvextend <span class="token parameter variable">-l</span> +100%FREE /dev/ubuntu-vg/ubuntu-lv

<span class="token comment"># 使调整后的LVM空间生效</span>
<span class="token function">sudo</span> resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然能够扩展的前提是lv所分配的物理硬盘有足够的空间进行扩展，如果没有硬盘空间则需要增加一块硬盘。</p><h2 id="添加硬盘-并将其扩展到lv" tabindex="-1"><a class="header-anchor" href="#添加硬盘-并将其扩展到lv" aria-hidden="true">#</a> 添加硬盘，并将其扩展到lv</h2><p>假使添加的这块硬盘在ubuntu中的name为<code>/dev/sdb</code></p><h3 id="创建分区" tabindex="-1"><a class="header-anchor" href="#创建分区" aria-hidden="true">#</a> 创建分区</h3><p><code>sudo fdisk /dev/sdb</code> 通过如下按键创建新的分区<code>n -&gt; 回车 -&gt; 回车 -&gt; 回车 -&gt; w</code> 创建好的分区名为：<code>/dev/sdb</code></p><h3 id="创建pv" tabindex="-1"><a class="header-anchor" href="#创建pv" aria-hidden="true">#</a> 创建pv</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> pvcreate /dev/sdb1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="将pv添加到vg" tabindex="-1"><a class="header-anchor" href="#将pv添加到vg" aria-hidden="true">#</a> 将pv添加到vg</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> vgextend ubuntu-vg /dev/sdd1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="扩展lv大小" tabindex="-1"><a class="header-anchor" href="#扩展lv大小" aria-hidden="true">#</a> 扩展lv大小</h3><p>有两种扩展方式，任选其一：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 增加10G空间给lv</span>
<span class="token function">sudo</span> lvextend <span class="token parameter variable">-r</span> <span class="token parameter variable">-L</span> +10G /dev/ubuntu-vg/ubuntu-lv

<span class="token comment"># 将所有空间分配给lv</span>
lvextend <span class="token parameter variable">-l</span> +100%FREE /dev/ubuntu-vg/ubuntu-lv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新调整实际分区大小" tabindex="-1"><a class="header-anchor" href="#重新调整实际分区大小" aria-hidden="true">#</a> 重新调整实际分区大小</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="验证" tabindex="-1"><a class="header-anchor" href="#验证" aria-hidden="true">#</a> 验证</h2><p>使用<code>df -h</code>可以看到新的/目录是否是扩展后的大小，同理每一次新建硬盘都可以用这种方式对lv进行扩展。</p>`,19),l=[i];function r(u,t){return a(),n("div",null,l)}const o=e(d,[["render",r],["__file","ubuntu_lv_extend.html.vue"]]);export{o as default};
