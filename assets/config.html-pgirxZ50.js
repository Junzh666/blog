import{_ as l}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as e,o as r,c as d,b as n,d as s,e as a,w as t,f as u}from"./app-j4kN759Y.js";const g={},m=n("div",{class:"hint-container tip"},[n("p",{class:"hint-container-title"},"提示"),n("p",null,[s("NextCloud的配置文件主要在app容器中， 配置文件的路径为"),n("code",null,"/var/www/html/config/config.php")])],-1),k=n("h2",{id:"无法登录问题",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#无法登录问题","aria-hidden":"true"},"#"),s(" 无法登录问题")],-1),h={href:"https://crossrt.me/fix-nextcloud-login-form-content-security-policy-issue/",target:"_blank",rel:"noopener noreferrer"},v=n("div",{class:"language-php line-numbers-mode","data-ext":"php"},[n("pre",{class:"language-php"},[n("code",null,[n("span",{class:"token comment"},"// ... 其他配置信息 ..."),s(`
`),n("span",{class:"token string single-quoted-string"},"'overwritehost'"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token string single-quoted-string"},"'demo.mydomain.com:44445'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token string single-quoted-string"},"'overwriteprotocol'"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token string single-quoted-string"},"'https'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token comment"},"// ... 其他配置信息 ..."),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=u(`<h2 id="为app商店配置socks5代理" tabindex="-1"><a class="header-anchor" href="#为app商店配置socks5代理" aria-hidden="true">#</a> 为APP商店配置socks5代理</h2><p>NextCLoud的配置文件是<code>config/config.php</code> 下面的内容用于配置onlyoffice常见的jwt部分、启用socks5代理，和mail app的设置参数：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>  <span class="token string single-quoted-string">&#39;allow_local_remote_servers&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
  <span class="token string single-quoted-string">&#39;onlyoffice&#39;</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">array</span> <span class="token punctuation">(</span>
    <span class="token string single-quoted-string">&#39;jwt_secret&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;secret&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;jwt_header&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;AuthorizationJwt&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string single-quoted-string">&#39;mail_smtpsecure&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;tls&#39;</span><span class="token punctuation">,</span>
  <span class="token string single-quoted-string">&#39;proxy&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;socks5://&lt;ip address&gt;:10808&#39;</span><span class="token punctuation">,</span>
  <span class="token string single-quoted-string">&#39;app.mail.imap.timeout&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token string single-quoted-string">&#39;app.mail.smtp.timeout&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token string single-quoted-string">&#39;app.mail.sieve.timeout&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token string single-quoted-string">&#39;app.mail.verify-tls-peer&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="在nextcloud中安装了rocket-chat-app后无法访问-显示connect-be-refused" tabindex="-1"><a class="header-anchor" href="#在nextcloud中安装了rocket-chat-app后无法访问-显示connect-be-refused" aria-hidden="true">#</a> 在NextCloud中安装了Rocket.Chat APP后无法访问，显示<code>connect be refused</code></h2><p>原因：rocketchat本身配置不允许被其他的页面嵌入和调用。 解决办法：</p><ol><li>修改rocketchat的配置，关闭 Restrict access inside any Iframe。</li><li>Options to X-Frame-Options 设置为 nextcloud的URL。</li><li>最关键的一条在rocketchat的nginx中修改配置文件<code>conf-available/headers.conf</code>添加内容：</li></ol><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment">#add_header X-Frame-Options sameorigin;</span>
<span class="token directive"><span class="token keyword">add_header</span> X-Frame-Options <span class="token string">&quot;ALLOW-FROM https://www.mydomain.com:44445/&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><em><strong>注意把URL改成你自己的</strong></em></p>`,8);function f(_,x){const o=e("ExternalLinkIcon"),i=e("CodeTabs");return r(),d("div",null,[m,k,n("p",null,[s("登录NextCloud时会出现点击登录后页面卡住的问题（"),n("a",h,[s("参考资料"),a(o)]),s("），需要再在config/config.php文件中添加：")]),a(i,{id:"11",data:[{id:"config.php"}],"tab-id":"language"},{title0:t(({value:c,isActive:p})=>[s("config.php")]),tab0:t(({value:c,isActive:p})=>[v]),_:1},8,["data"]),b])}const y=l(g,[["render",f],["__file","config.html.vue"]]);export{y as default};
