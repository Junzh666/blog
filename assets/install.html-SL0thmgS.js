import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as u,c as r,e as t,w as e,f as o,d as s,b as n}from"./app-j4kN759Y.js";const d={},k=o(`<h2 id="创建容器" tabindex="-1"><a class="header-anchor" href="#创建容器" aria-hidden="true">#</a> 创建容器</h2><p>创建工作目录：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/work/gitlab <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/work/gitlab
<span class="token function">touch</span> docker-compose.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>docker-compose.yml</code>文件内容如下：</p>`,4),m=n("div",{class:"language-yaml line-numbers-mode","data-ext":"yml"},[n("pre",{class:"language-yaml"},[n("code",null,[n("span",{class:"token key atrule"},"version"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'3.6'"),s(`
`),n("span",{class:"token key atrule"},"services"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"web"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token key atrule"},"container_name"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'gitlab'"),s(`
    `),n("span",{class:"token key atrule"},"image"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'gitlab/gitlab-ee:latest'"),s(`
    `),n("span",{class:"token key atrule"},"restart"),n("span",{class:"token punctuation"},":"),s(` always
    `),n("span",{class:"token key atrule"},"hostname"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'gitlab.mydomain.com'"),s(`
    `),n("span",{class:"token key atrule"},"extra_hosts"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},'"host.docker.internal:host-gateway"'),s(`
    `),n("span",{class:"token key atrule"},"environment"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token key atrule"},"GITLAB_OMNIBUS_CONFIG"),n("span",{class:"token punctuation"},":"),s(` 
        external_url 'https`),n("span",{class:"token punctuation"},":"),s("//gitlab.mydomain.com"),n("span",{class:"token punctuation"},":"),s(`8888'
        gitlab_rails`),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'gitlab_shell_ssh_port'"),n("span",{class:"token punctuation"},"]"),s(` = 2222
        gitlab_rails`),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'ldap_enabled'"),n("span",{class:"token punctuation"},"]"),s(` = true
        gitlab_rails`),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'ldap_servers'"),n("span",{class:"token punctuation"},"]"),s(" = "),n("span",{class:"token punctuation"},"{"),s(`
          'main' =`),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
            'label' =`),n("span",{class:"token punctuation"},">"),s(" 'LDAP'"),n("span",{class:"token punctuation"},","),s(`
            'host' =`),n("span",{class:"token punctuation"},">"),s("  'host.docker.internal'"),n("span",{class:"token punctuation"},","),s(`
            'port' =`),n("span",{class:"token punctuation"},">"),s(" 389"),n("span",{class:"token punctuation"},","),s(`
            'uid' =`),n("span",{class:"token punctuation"},">"),s(" 'uid'"),n("span",{class:"token punctuation"},","),s(`
            'encryption' =`),n("span",{class:"token punctuation"},">"),s(" 'plain'"),n("span",{class:"token punctuation"},","),s(`
            'allow_username_or_email_login' =`),n("span",{class:"token punctuation"},">"),s(" true"),n("span",{class:"token punctuation"},","),s(`
            'user_filter' =`),n("span",{class:"token punctuation"},">"),s(" '("),n("span",{class:"token important"},"&(accountStatus=active)(memberof=cn=GitLab"),n("span",{class:"token punctuation"},","),s("ou=Groups"),n("span",{class:"token punctuation"},","),s("domainName=mydomain.com"),n("span",{class:"token punctuation"},","),s("o=domains"),n("span",{class:"token punctuation"},","),s("dc=mydomain"),n("span",{class:"token punctuation"},","),s("dc=com))'"),n("span",{class:"token punctuation"},","),s(`
            'block_auto_created_users' =`),n("span",{class:"token punctuation"},">"),s(" false"),n("span",{class:"token punctuation"},","),s(`
            'lowercase_usernames' =`),n("span",{class:"token punctuation"},">"),s(" false"),n("span",{class:"token punctuation"},","),s(`
            'bind_dn' =`),n("span",{class:"token punctuation"},">"),s(" 'cn=vmail"),n("span",{class:"token punctuation"},","),s("dc=mydomain"),n("span",{class:"token punctuation"},","),s("dc=com'"),n("span",{class:"token punctuation"},","),s(`
            'password' =`),n("span",{class:"token punctuation"},">"),s(" '<your ldap password"),n("span",{class:"token punctuation"},">"),s("'"),n("span",{class:"token punctuation"},","),s(`
            'base' =`),n("span",{class:"token punctuation"},">"),s(" 'dc=mydomain"),n("span",{class:"token punctuation"},","),s(`dc=com'
          `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token key atrule"},"ports"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},"'8888:8888'"),s(`
      `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},"'2222:22'"),s(`
    `),n("span",{class:"token key atrule"},"volumes"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},"'./config:/etc/gitlab'"),s(`
      `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},"'./logs:/var/log/gitlab'"),s(`
      `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},"'./data:/var/opt/gitlab'"),s(`
    `),n("span",{class:"token key atrule"},"shm_size"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'256m'"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=o(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>accountStatus<span class="token operator">=</span>active<span class="token punctuation">)</span><span class="token punctuation">(</span>memberof<span class="token operator">=</span>cn<span class="token operator">=</span>GitLab,ou<span class="token operator">=</span>Groups,domainName<span class="token operator">=</span>mydomain.com,o<span class="token operator">=</span>domains,dc<span class="token operator">=</span>mydomain,dc<span class="token operator">=</span>com<span class="token punctuation">))</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>表示LDAP账号为启用状态且属于GitLab组，用于实现用户对应用的使用权限。 创建容器：<code>docker compose up -d</code></p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>Gitlib镜像较大，pull的过程持续时间较长。</p></div>`,3);function v(g,_){const a=p("CodeTabs");return u(),r("div",null,[k,t(a,{id:"10",data:[{id:"docker-compose.yml"}],"tab-id":"language"},{title0:e(({value:c,isActive:l})=>[s("docker-compose.yml")]),tab0:e(({value:c,isActive:l})=>[m]),_:1},8,["data"]),b,t(a,{id:"24",data:[],"tab-id":"language"})])}const f=i(d,[["render",v],["__file","install.html.vue"]]);export{f as default};
